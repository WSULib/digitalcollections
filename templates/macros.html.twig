{# Date #}
{% macro date(action, data) %}
	{% import _self as m %}
	{% for date in data.response.solr_doc.dc_date %}
		{{m.facetBuilder(action, "dc_date", date, "")}}
	{% endfor %}
{% endmacro %}

{# Subjects #}
{% macro subjects(action, data) %}
	{% import _self as m %}
	{% if data.response.solr_doc.dc_subject > 1 %}
		{% for subject in data.response.solr_doc.dc_subject %}
			{{m.facetBuilder(action, "dc_subject", subject, "")}}
		{% endfor %}
	{% else %}
		{{m.facetBuilder(action, "dc_subject", data.response.solr_doc.dc_subject, "")}}
	{% endif %}
{% endmacro %}

{# Content type #}
{% macro contentType(action, data) %}
	{% import _self as m %}
	{% if data.response.content_type > 1 %}
		{% for ct in data.response.content_type %}
			{{m.facetBuilder(action, "human_hasContentModel", ct, "")}}
		{% endfor %}
	{% else %}
		{{m.facetBuilder(action, "human_hasContentModel", data.response.content_type, "")}}
	{% endif %}
{% endmacro %}

{# Facet Builder #}
{% macro facetBuilder(action, facet, facet_value, facet_count, show_count, query_string) %}
	{% if action == "add" %}
		<a href="{{path_for('search') ~ "?" ~ add_param_to_query_string(QueryBuilder, facet ~ ":" ~ facet_value, query_string)}}">{{facet_value}}{% if show_count %} ({{facet_count}}){% endif %}</a>
	{% elseif action == "del" %}
		<a href="{{path_for('search') ~ "?" ~ del_param_from_query_string(QueryBuilder, facet ~ ":" ~ facet_value, query_string)}}">{{facet_value}}{% if show_count %} ({{facet_count}}){% endif %}</a>
	{% endif %}
{% endmacro %}

{# Facet Link Builder #}
{% macro facetLinkBuilder(action, facet, facet_value, query_string) %}
	{% if action == "add" %}
		{{path_for('search') ~ "?" ~ add_param_to_query_string(QueryBuilder, facet ~ ":" ~ facet_value, query_string)}}
	{% elseif action == "del" %}
		{{path_for('search') ~ "?" ~ del_param_from_query_string(QueryBuilder, facet ~ ":" ~ facet_value, query_string)}}
	{% endif %}
{% endmacro %}

{# Secondary Images -- if any #}
{% macro secondaryImages(data) %}
	{% for img in data.response.content_type_specific[0].imageParts.sorted %}
		<img src="/loris/fedora:{{data.response.pid}}%7C{{img.preview}}/full/63,/0/default.jpg">
	{% endfor %}
{% endmacro %}

{# metadata fields #}
{% macro metadataField(field_name, values, facet_name, create_facet_link) %}
	{% import _self as m %}
	{% if values > 1 or values != none %}
		<div>
			<div class="label">{{field_name}}</div>
			{% if values > 1 %}
				{% for value in values %}
					<div>{% if create_facet_link %}{{ m.facetBuilder('add', facet_name, value, false, false, '') }}{% else %}{{value|raw}}{% endif %}</div>
				{% endfor %}
			{% else %}
				<div>{% if create_facet_link %}{{ m.facetBuilder('add', facet_name, values, false, false, '') }}{% else %}{{values|raw}}{% endif %}</div>
			{% endif %}
		</div>
	{% endif %}
{% endmacro %}

{# create link for single item #}
{% macro singleItem(pid) %}
	{{ path_for('item') ~ "/" ~ pid }}
{% endmacro %}



{# hierarchical tree #}
{% macro hierarchicalTree(object_hierarchy, i) %}

<div class="row">
	<div id="hier_tree" class="col-md-12">
		<h4>Navigation</h4>	

		<div class="facets" style="width:100%;">

			<!-- parent container -->
			<ul class="facet_container filter parent" style="display: block;">
				<h3 >Part of</h3>		
				<ul class="tree facet_list" style="display: block;">
					{% for ancestor in object_hierarchy.ancestors %}
						<li><a href="/item/{{ancestor.pid}}">{{ancestor.title}}</a></li>
					{% endfor %}					
				</ul>
			</ul>

			<!-- current item siblings -->
			<ul class="facet_container filter siblings" style="display: block;">
				<h3 class="tree-toggler"><span class="icon-plus-thin"></span>Siblings ({{ object_hierarchy.siblings|length }})</h3>
				<ul class="tree facet_list" style="display: none;">
					{% for sibling in object_hierarchy.siblings %}
						<li><a href="/item/{{sibling.pid}}">{{sibling.title}}</a></li>
					{% endfor %}
				</ul>
			</ul>

			<!-- current item children -->
			<ul class="facet_container filter children" style="display: block;">
				<h3 class="tree-toggler"><span class="icon-plus-thin"></span>Contents ({{ object_hierarchy.children|length }})</h3>
				<ul class="tree facet_list" style="display: none;">
					{% for child in object_hierarchy.children %}
						<li><a href="/item/{{child.pid}}">{{child.title}}</a></li>
					{% endfor %}
				</ul>
			</ul>

		</div>

	</div>
</div>

{% endmacro %}

{# Downloads #}

{# Social Media #}
{% macro socialMedia() %}
    <li class="share">            
        <ul>
          <!-- facebook -->          
          <li><a href="//www.facebook.com/sharer/sharer.php?u=https://digital.library.wayne.edu/digitalcollections/item/{{data.response.pid}}"><span class="st_facebook_custom icon-facebook" displaytext="Facebook"></span></a></li>
          <li><a href="//twitter.com/share?url=https://digital.library.wayne.edu/digitalcollections/item/{{data.response.pid}}&amp;text=Virtual Motor City"><span class="st_twitter_custom icon-twitter4" displaytext="Tweet"></span></a></li>
          <li><a href="//www.tumblr.com/share/link?url=https://digital.library.wayne.edu/digitalcollections/item/{{data.response.pid}}" target="blank_"><span class="st_email_custom icon-tumblr" displaytext="Email"></span></a></li>
          <li><a href="mailto:?subject=Virtual Motor City - Wayne State University Digital Collections&amp;body=Look%20what%20I%20found%20in%20the%20Wayne%20State%20University%20Digital%20Collections!%0A%0Ahttps://digital.library.wayne.edu/digitalcollections/item/{{data.response.pid}}"><span class="st_email_custom icon-email" displaytext="Email"></span></a></li>
        </ul>
    </li>
{% endmacro %}
{# MLA Citation #}

{# APA Citation #}