{% import "macros.html.twig" as m %}
{% extends "base.html.twig" %}

{% block title %}{{data.response.solr_doc.dc_title[0]}}{% endblock %}
{% block head %}
    {{ parent() }}
{% endblock %}

{% block content %}


{% block object_hierarchy %}{% endblock %}

<!-- piwik.library.wayne code here-->
<script type="text/javascript"> 
    var _paq = _paq || [];  
    _paq.push(['setCustomVariable', '1', 'content_model', 'Collection', 'visit'])
    _paq.push(["setDomains", ["*.digital.library.wayne.edu"]]);
    _paq.push(['trackPageView']);
    _paq.push(['enableLinkTracking']);
    (function() {
        var u="//piwik.library.wayne.edu/";
        _paq.push(['setTrackerUrl', u+'piwik.php']);
        _paq.push(['setSiteId', 28]);
        var d=document, g=d.createElement('script'), s=d.getElementsByTagName('script')[0];
        g.type='text/javascript'; g.async=true; g.defer=true; g.src=u+'piwik.js'; s.parentNode.insertBefore(g,s);
    })();
</script>
<!--end piwik-->

<!-- hidden schema.org stuctured data -->
<div id="struct_data" style="display:none;" itemscope="" itemtype="https://schema.org/CreativeWork">
<span itemprop="name">{{data.response.solr_doc.dc_title[0]}}<br></span>
<span itemprop="description">{{ data.response.solr_doc.mods_abstract_ms }}<br></span>       
<span itemprop="text"></span>
<span itemprop="genre">{{ data.response.solr_doc.mods_resource_type_ms}}<br></span>
<span itemprop="dateCreated">{{ data.response.solr_doc.dc_date }}</span>
<img src="//digital.library.wayne.edu/item/{{data.response.pid}}/thumbnail/" class="primary-image" itemprop="image">
<meta itemprop="thumbnailUrl" content="https://digital.library.wayne.edu/item/{{data.response.pid}}/thumbnail/">
</div>
<!-- ******************************** -->




        <div id="templateCM" class="container">
            
            <div class="row">
                <div class="breadcrumb col-md-3">               
                    <a href="#" onclick="window.history.back(); return false;" style="font-size:17px;"><span style="font-size:20px; margin-right:5px;">«</span> Back</a>
                </div>
            </div>

            <div class="row">

                <!-- empty pending work -->
                <div class="col-md-3 related-objects">                                    
                </div>

                <div class="col-md-6 primary-object">
                    <div class="primary-object-container">



{% block item_content %}{% endblock %}



</div>

                    <div class=" metadata display-more-info" id="more-info">    
                        <table class="table table-hover"><tbody>

    <style>
        tbody a {
            text-decoration: underline;
            color:#093f39;
        }
    </style>

    <!--Identifier-->
    <tr>
        <td>Identifier:</td>        
        <td>
                <span>{{data.response.pid}}</span>
        </td>       
    </tr>

    <!--Content Type(s)-->
    <tr>
        <td>Content Type(s):</td>       
        <td>
            {# Content Type #}
            {{ m.metadataField('Content Type', data.response.solr_doc.human_hasContentModel, 'human_hasContentModel', true) }}
                <a class="linebreak" href="search.php?q=*&amp;start=0&amp;fq[]=rels_hasContentModel:&quot;info:fedora/CM:Collection&quot;&amp;start=0">Collection</a>
        </td>       
    </tr>

    <!--Date (DC specific)-->
    <tr>
        <td>Date:</td>
        <td>
            {{ m.metadataField('Date', data.response.solr_doc.dc_date, 'dc_date', true) }}
        </td>
    </tr>

    <!--Date (Year)-->
    <tr>
        <td>Year:</td>
        <td>
                ????
        </td>
    </tr>

    <!--Collections-->
    <tr style="display: none;">
        <td>Collection:</td>
        <td>
        </td>
    </tr>

    <!--Subjects-->
    <tr>
        <td>Subject:</td>
        <td>
                <a class="linebreak" href="search.php?q=*&amp;start=0&amp;fq[]=dc_subject:&quot;History&quot;&amp;start=0">History</a>  {{ m.metadataField('Subjects', data.response.solr_doc.dc_subject, 'dc_subject', true) }}
        </td>
    </tr>

    <!-- ######################## Archival Finding Aids ######################## -->

    <!-- acqusition -->
    <tr style="display: none;">
        <td>Acquisition:</td>       
        <td>
        </td>       
    </tr>

    <!-- processHist -->
    <tr style="display: none;">
        <td>Process History:</td>       
        <td>
        </td>       
    </tr>

    <!-- arrangement -->
    <tr style="display: none;">
        <td>Arrangement:</td>       
        <td>
        </td>       
    </tr>

    <!-- relatedMaterials -->
    <tr style="display: none;">
        <td>Related Materials:</td>     
        <td>
        </td>       
    </tr>

    <!-- preferredCitation -->
    <tr style="display: none;">
        <td>Preferred Citation:</td>        
        <td>
        </td>       
    </tr>

    <!-- scopeAndContent -->
    <tr style="display: none;">
        <td>Scope &amp; Content:</td>       
        <td>
        </td>       
    </tr>

    <!-- findingAid -->
    <tr style="display: none;">
        <td>Finding Aid:</td>       
        <td>
        </td>       
    </tr>

    <!-- transfers -->
    <tr style="display: none;">
        <td>Transfers:</td>     
        <td>
        </td>       
    </tr>

    <!-- history -->
    <tr style="display: none;">
        <td>History:</td>       
        <td>
        </td>       
    </tr>

    <!-- dateStatement -->
    <tr style="display: none;">
        <td>Date Statement:</td>        
        <td>
            ?
        </td>       
    </tr>





    <!-- ######################## / Archival Finding Aids ######################## -->

    <!--Coverage-->
    <tr>
        <td>Coverage:</td>
        <td>
            {{ m.metadataField('Coverage', data.response.solr_doc.dc_coverage, 'dc_coverage', true) }}
        </td>
    </tr>

    <!--Creator-->
    <tr>
        <td>Creator:</td>
        <td>
            {{ m.metadataField('Creator', data.response.solr_doc.dc_creator, 'dc_creator', false) }}
        </td>
    </tr>

    <!--MODS Resource Type-->
    <tr>
        <td>Resource Type:</td>
        <td>
         ?????
        </td>   

    <!--Publisher-->
    </tr><tr style="display: none;">
        <td>Publisher:</td>
        <td>
        {{ m.metadataField('Publisher', data.response.solr_doc.dc_publisher, 'dc_publisher', true) }}
        </td>
    </tr>

    <!--Source-->
    <tr style="display: none;">
        <td>Source:</td>
        <td>
        ????
        </td>
    </tr>

    <!--Rights-->
    <tr>
        <td>Rights:</td>
        <td>

        <!-- Rights specific to the Digital Object trump collection object rights
        This is reflected in logic below. -->

        <!-- Object Rights -->      
            <strong>Digital Objects Rights:</strong><br>
            {{ m.metadataField('Publisher', data.response.solr_doc.dc_publisher, 'dc_rights', true) }}
        
        <!-- Collection Rights -->

        </td>
    </tr>

    <!-- Credit Line Note -->
    <tr>
        <td>Credit:</td>
        <td>
            {{ m.metadataField('Publisher', data.response.solr_doc.mods_note_creditLine_ms, 'mods_note_creditLine_ms', true) }}
        </td>
    </tr>

    <!--Components-->
    <tr style="display: none;">
        <td>Components:</td>
        <td>
        </td>
    </tr>

    <!--Persistent, Catalog Record -->
    <tr style="display: none;">
        <td>Catalog Record:</td>
        <td>
        </td>
    </tr>

    <!--Fulltext Datastreams-->
    <tr style="display: none;">
        <td>Fulltext(s):</td>
        <td>
        </td>
    </tr>

    <!--Transcripts -->
    <tr style="display: none;">
        <td>Transcription:</td>
        <td>
        </td>
    </tr>

    <!--Hierarchical Container-->
    <tr style="display: none;">
        <td>Container:</td>
        <td>
        </td>
    </tr>

    <!--Related Objects-->
    

    <script>
        // remove instances of <mods:relatedItem> if includes @type attribute, as we handle other ways
        $('.relatedItem').each(function(){
            if ($(this).attr('type') != '') {
                $(this).remove();
            }
        });
    </script>

    <!--Physical Archival Location-->
    {% if response.solr_doc.mods_otherFormat_title_ms %}
    <tr>
        <td>Other Formats:</td>
        <td>
                <strong>Title:</strong> {{response.solr_doc.mods_otherFormat_title_ms}}<br><br>
                <strong>Location:</strong> {{data.response.solr_doc.mods_otherFormat_physLocale_ms[0]}}<br><br>
                <strong>Note:</strong> {{data.response.solr_doc.mods_otherFormat_note_ms[0]}}
        </td>
    </tr>
    {% endif %}

    <!--IIIF Manifest-->
    <tr>
        <!-- <td><img src="img/iiif_logo.png" height=25 /></td> -->
        <td>Structured Data</td>
        <td>
            <a class="linebreak" href="/item/{{data.response.pid}}/bitStream/MODS">MODS</a>
            
            <a class="linebreak" href="//digital.library.wayne.edu/WSUAPI/?functions[]=singleObjectPackage&amp;PID={{data.response.pid}}">WSUDOR API data</a>
        </td>       
    </tr>  

    <!--Downloads-->
    <tr class="downloads" style="display: none;">
        <td>Downloads</td>
        <td id="downloads_target"></td>
    </tr>                                  

</tbody>








</table>                    
                    </div>
                </div>

                <!-- metadata new -->
                <div class="info-panel col-md-3"><h3 class="title">
    {{data.response.solr_doc.dc_title[0]}}<br>
     
</h3>

<h4>    
    {{ data.response.solr_doc.dc_date[0] }}
</h4>

<p style="max-height:395px; overflow-y:scroll;" class="description">
    {{ m.metadataField('Description', data.response.solr_doc.mods_abstract_ms, 'mods_abstract_ms', false) }}
</p>

<!-- ########################################### -->
<style type="text/css">
    
</style>


<ul class="buttons">    
    
    <!-- More info -->
    <li class="more-info-clickr">
        <i class="icon-info"></i> <span class="more-info">Less Info</span>
    </li>
    
    <!-- Add citation button if WSUebook -->
    
    <!-- Favorite -->
    <!-- <li class="add-to-favorites" onclick="addFav();">
        <i class="icon-star"></i> Add to Favorites
    </li> -->

    <!-- Share -->
    <li class="share">            
        <ul>
          <!-- facebook -->          
          <li><a href="//www.facebook.com/sharer/sharer.php?u=https://digital.library.wayne.edu/digitalcollections/item?id={{data.response.pid}}"><span class="st_facebook_custom icon-facebook" displaytext="Facebook"></span></a></li>
          <li><a href="//twitter.com/share?url=https://digital.library.wayne.edu/digitalcollections/item?id={{data.response.pid}}&amp;text=Virtual Motor City"><span class="st_twitter_custom icon-twitter4" displaytext="Tweet"></span></a></li>
          <li><a href="//www.tumblr.com/share/link?url=https://digital.library.wayne.edu/digitalcollections/item?id={{data.response.pid}}" target="blank_"><span class="st_email_custom icon-tumblr" displaytext="Email"></span></a></li>
          <li><a href="mailto:?subject=Virtual Motor City - Wayne State University Digital Collections&amp;body=Look%20what%20I%20found%20in%20the%20Wayne%20State%20University%20Digital%20Collections!%0A%0Ahttps://digital.library.wayne.edu/digitalcollections/item?id={{data.response.pid}}"><span class="st_email_custom icon-email" displaytext="Email"></span></a></li>
        </ul>
    </li>

<script>
displayForm();
$.cookie('item_id','{{data.response.pid}}');
var permissions_url = "permissions_form.php?v="+Math.floor((Math.random() * 10000) + 1);
$("#permissions").attr("href", permissions_url);
</script>

    <!-- Report a Problem -->
<div class="bothButtons" style="width: 100%; overflow: hidden; display: none;">
    <button class="flag btn btn-block" onclick="showForm();" style="width: 49%; float: left;">Report a Problem?</button>
    <a id="permissions" href="permissions_form.php?v=7710">
        <button class="permission btn btn-block" style="width: 49%; float: right; margin-top: -1px;">Permission Request</button>
    </a>
</div>

    <button class="original flag btn btn-block" style="display: block;" onclick="showForm();">Report a Problem?</button>
        <form method="post" class="col-sm-12 col-md-12 flag-form contact-form">
            <label for="name" class="nameLabel">Name</label>
              <input id="name" type="text" name="name" placeholder="Enter your name">
            <label for="email" class="emailLabel">Email</label>
              <input id="email" type="email" name="email" placeholder="Enter your email">
            <label for="message" class="messageLabel">Message</label>
              <textarea id="message" name="message" required="required" placeholder="Your message"></textarea>
            <button type="submit" class="flag-form-button btn" onclick="reportProb(); return false;">Send Message</button>
        </form>
<script>
    //epub
    /// EPUB SECTION
        if (APIdata.singleObjectPackage.objectSolrDoc && APIdata.singleObjectPackage.objectSolrDoc.rels_hasEpub && APIdata.singleObjectPackage.objectSolrDoc.rels_hasEpub[0]) {
            $(".info-panel").append("<br/><a href='//"+config.APP_HOST+"/item/"+PID+"/bitStream/EPUB'><button class='original btn btn-block' style='display: block;background-color: lightgreen;'>Download eBook</button></a>");
        }
</script>

</ul>

</div>

                <!-- <div class="col-md-6 col-md-offset-3 display-more" id="display-more">                    
                </div> -->

            </div>

        </div> <!-- closes templateCM -->

        <footer>
    <div class="container">
        <div class="row">
          <div class="col-xs-6 pull-right">
            <ul class="links">
              <li><a href="http://www.lib.wayne.edu">Libraries</a></li>
              <li><a href="https://www.surveymonkey.com/s/QHWX3V7">Feedback</a></li>
              <li><a href="http://www.lib.wayne.edu/info/policies/privacy.php">Privacy</a></li>
              <li><a href="http://www.lib.wayne.edu/info/policies/eresources.php">Acceptable Use</a></li>
            </ul>
          </div>
          <div class="col-xs-6 copyright">
            © 2009 - 2018 Wayne State University Board of Governors
          </div>
        </div>
    </div>
</footer>       
        
    

    <!--API call-->

    
<script type="text/javascript">
    enquire.register("screen and (max-width:991px)", {
        match : function() { 
            // move to top
            $('.info-panel').prependTo('.primary-object');      
        },
        unmatch : function() {
            $('.info-panel').insertAfter('.primary-object');
        }
    });
</script>


<div id="sidr-main" class="sidr left"><div class="sidr-inner">
                <ul class="sidr-class-nav sidr-class-navbar-nav">
                    <li><a href="allcollections.php">Collections</a></li>
                    <li><a href="search.php">Browse</a></li>
                    <li><a href="favorites.php" id="fav_link">Favorites</a></li><li><a href="about.php">About</a></li>
                    <li><a href="contact.php">Contact</a></li>
                </ul>
            </div><div class="sidr-inner">
                    <li class="sidr-class-login_status"><a onclick="logoutUser(); return false;" href="#"><i class="icon-exit"></i>Log Out</a></li>
                </div></div>

        


{% endblock %}
